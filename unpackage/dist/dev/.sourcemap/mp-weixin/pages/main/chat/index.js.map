{"version":3,"sources":["uni-app:///main.js","webpack:///D:/gitgpt更新代码不修改/chatgpt_wechat_font/pages/main/chat/index.vue?e79a","webpack:///D:/gitgpt更新代码不修改/chatgpt_wechat_font/pages/main/chat/index.vue?3cf0","webpack:///D:/gitgpt更新代码不修改/chatgpt_wechat_font/pages/main/chat/index.vue?e523","webpack:///D:/gitgpt更新代码不修改/chatgpt_wechat_font/pages/main/chat/index.vue?e634","uni-app:///pages/main/chat/index.vue","webpack:///D:/gitgpt更新代码不修改/chatgpt_wechat_font/pages/main/chat/index.vue?8b2a","webpack:///D:/gitgpt更新代码不修改/chatgpt_wechat_font/pages/main/chat/index.vue?5eb2"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,iG,6FAFmBA,EAAE,CAACC,iCAAH,GAAuCC,mBAAvC;AAGnBC,UAAU,CAACC,cAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAkH;AAClH;AACyD;AACL;AACc;;;AAGlE;AACuL;AACvL,gBAAgB,8LAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,gFAAM;AACR,EAAE,yFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,oFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,qRAEN;AACP,KAAK;AACL;AACA,aAAa,+QAEN;AACP,KAAK;AACL;AACA,aAAa,+QAEN;AACP,KAAK;AACL;AACA,aAAa,iSAEN;AACP;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AChDA;AAAA;AAAA;AAAA;AAAssB,CAAgB,osBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACmM1tB;AACA;AACA;;AAEA,yF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AALA,kB,wWAOA;AACA,M,CACA;AACA,O,CACA;AACA,e,eACA,EACA,YACA,EADA,gBACA,CACA,oBACA,CAHA,EADA,EAMA,cACA,cADA,EANA,EASA,MATA,oBASA,mBACA;AACA,0BACA,qCAHA,CAIA;AACA;AACA;AACA,+CACA,sCACA,yDACA;AACA,wDAEA,aACA;AACA,iCAFA,CAGA;AACA,0BAEA,CAVA,CAWA;AACA,8BACA,oBACA,CACA,CAfA,EAeA,IAfA,GAgBA,CAlBA,EAmBA,oCAEA,4BACA,wBACA,8CACA,CAxCA,EAyCA,QAzCA,sBAyCA,CACA,eACA,CA3CA,EA4CA,IA5CA,kBA4CA,CACA,SACA,QADA,EACA;AACA,mBAFA,EAGA,cAHA,EAIA,UAJA,EAKA,iBALA,EAMA,cANA,EAOA;AACA;AACA,kBACA,SADA,EAEA,6BAFA,EAGA,OAHA,EAIA,4DAJA,GATA,EAeA,OAfA,EAgBA,KAhBA,EAiBA,eAjBA,EAkBA,YAlBA,EAmBA,oBAnBA,EAoBA,eApBA,EAqBA,mBArBA,EAsBA,gBAtBA,EAuBA,2BAvBA,EAwBA,iBAxBA,EAyBA,yBAzBA,EA0BA,cA1BA,GA4BA,CAzEA,EA0EA,MA1EA,oBA0EA,CACA,oBACA,eACA,CA7EA,EA8EA,MA9EA,oBA8EA,CAEA,mBACA,gBACA,kBACA,iBACA,4DACA,CArFA,EAsFA,WACA,WADA,yBACA,CACA,gBACA,yCACA,CAJA,EAKA,QALA,sBAKA,mBACA,gBACA,8DACA,kBACA,CACA,cACA,uBADA,EAEA,SAFA,EAGA,UAHA,GALA,CAUA;AACA,kHACA,sBACA,mBACA,6BACA,gDACA,oBACA,sBADA,EAEA,UAFA,IAIA,CAEA,oBACA,SADA,EAEA,uBAFA,EAGA,QAHA,IAKA,CAbA,EAcA,mBACA,CACA,CAnBA,EAoBA,CApCA,EAqCA,UArCA,wBAqCA,CACA,kCACA,yBACA,CAxCA,EAyCA,SAzCA,qBAyCA,CAzCA,EAyCA,CACA,KACA,2CACA,2BACA,gEACA;AACA,kCACA;AACA,iCAFA,CAGA;AACA,sEACA,CALA,MAKA,CACA,uBACA,wDACA,CACA,CACA,CAdA,MAcA,CACA,kCACA,wBACA,CACA,CAnBA,CAmBA,WACA,wBACA,CAGA,CAlEA,EAmEA,iBAnEA,6BAmEA,CAnEA,EAmEA,CACA,gEACA,qBACA,oBACA,SADA,EAEA,iCAFA,EAGA,QAHA,IAKA,aACA,CA5EA,EA6EA;AACA,aA9EA,uBA8EA,CACA,oDADA,CACA;AACA,wBACA,mBADA,CAEA;AACA,qIACA,sBACA,gBACA,aADA,EAEA,cAFA,IAIA,CACA,CAPA,EAQA,CAXA,MAWA,CACA,sBACA,CAGA,CAhGA,EAiGA;AACA,eAlGA,yBAkGA,CACA,gBACA,YADA,EAEA,cAFA,IAIA,CAvGA,EAwGA;AACA,eAzGA,uBAyGA,GAzGA,EAyGA,CACA,uBACA,SADA,IAGA,CA7GA,EA8GA;AACA,aA/GA,uBA+GA,CACA,8CACA,eACA,yBADA,CAEA;AACA,kCACA,oCACA,CACA,CAvHA,EAwHA;AACA,aAzHA,uBAyHA,CACA,wBACA,CA3HA,EA4HA;AACA,SA7HA,iBA6HA,EA7HA,EA6HA,CACA;AACA;AACA;AACA;AACA;;AAEA;AACA,KArIA;AAsIA;AACA,WAvIA,mBAuIA,CAvIA,EAuIA,CAvIA,EAuIA;AACA;AACA,mBADA;AAEA,gCAFA;;;AAKA;;AAEA;;AAEA;AACA,KAlJA;AAmJA;AACA,SApJA,iBAoJA,CApJA,EAoJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAFA,MAEA;AACA;AACA;AACA;AACA;;AAEA,SAlBA,EAkBA,IAlBA;AAmBA,OArBA,EAqBA,KArBA;AAsBA,KAjLA;AAkLA;AACA,UAnLA,kBAmLA,OAnLA,EAmLA;AACA;AACA;AACA;AACA,KAvLA;AAwLA,WAxLA,qBAwLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KApMA;AAqMA,SArMA,iBAqMA,CArMA,EAqMA;AACA;AACA;AACA,KAxMA;AAyMA;AACA,cA1MA,sBA0MA,CA1MA,EA0MA;AACA;AACA;AACA;AACA,iCADA;;AAGA;AACA;AACA;AACA;AACA,0BADA;AAEA,yBAFA;AAGA,0BAHA;;AAKA;AACA,SARA,MAQA;AACA;AACA,0BADA;AAEA,yBAFA;AAGA,0BAHA;;AAKA,SANA,MAMA;AACA;AACA;AACA,OAlBA;AAmBA,KAnOA;AAoOA;AACA,eArOA,uBAqOA,GArOA,EAqOA,QArOA,EAqOA;;AAEA;;AAEA;AACA;AACA,2BADA;AAEA,uBAFA;AAGA,wBAHA;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA,oBADA;AAEA,oBAFA;;AAIA;AACA;AACA;;AAEA,KA5PA;AA6PA,kBA7PA,0BA6PA,MA7PA,EA6PA;AACA;AACA;AACA;AACA;AACA,4BADA;AAEA,sBAFA;AAGA,wBAHA;AAIA,qBAJA;AAKA;AACA;AACA;AACA;AACA,4DADA;;AAGA;AACA,aANA,EAMA,IANA;AAOA,WAbA;;AAeA;AACA;AACA;AACA;AACA;AACA;AACA,gCADA;AAEA,wBAFA;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA,SAJA,MAIA;AACA;AACA;AACA;AACA,SAJA,MAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DADA;;AAGA;AACA,aATA,EASA,IATA;AAUA,WAXA;AAYA;AACA,OAxBA;;AA0BA,KAnTA;AAoTA;AACA,SArTA,mBAqTA;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA;AACA;AACA,KA5TA;AA6TA,gBA7TA,0BA6TA;AACA;AACA;AACA;AACA;;AAEA,KAnUA;AAoUA,WApUA,qBAoUA;AACA;AACA,KAtUA;AAuUA;AACA,WAxUA,mBAwUA,CAxUA,EAwUA,CAxUA,EAwUA;;AAEA;AACA,mBADA;AAEA,8BAFA;;;AAKA;;AAEA;;AAEA;AACA,KApVA;AAqVA,kBArVA,4BAqVA;AACA;AACA;AACA,KAxVA;AAyVA,aAzVA,uBAyVA;AACA;AACA;AACA,oDADA;;;AAIA,KA/VA;AAgWA,aAhWA,uBAgWA;AACA;AACA,0CADA;;AAGA,KApWA;AAqWA,cArWA,wBAqWA;AACA;AACA;AACA,oDADA;;AAGA,KA1WA;AA2WA,gBA3WA,0BA2WA;AACA;AACA,4CADA;;AAGA,KA/WA,EAtFA,E;;;;;;;;;;;;;AC/MA;AAAA;AAAA;AAAA;AAAi0C,CAAgB,uvCAAG,EAAC,C;;;;;;;;;;;ACAr1C;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/main/chat/index.js","sourcesContent":["import 'uni-pages';wx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/main/chat/index.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=d0c854f0&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../hubuder/HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/main/chat/index.vue\"\nexport default component.exports","export * from \"-!../../../../../hubuder/HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../hubuder/HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../hubuder/HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../hubuder/HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../hubuder/HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../hubuder/HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=d0c854f0&\"","var components\ntry {\n  components = {\n    uIcon: function() {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-icon/u-icon\" */ \"uview-ui/components/u-icon/u-icon.vue\"\n      )\n    },\n    uRow: function() {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-row/u-row\" */ \"uview-ui/components/u-row/u-row.vue\"\n      )\n    },\n    uCol: function() {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-col/u-col\" */ \"uview-ui/components/u-col/u-col.vue\"\n      )\n    },\n    uButton: function() {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-button/u-button\" */ \"uview-ui/components/u-button/u-button.vue\"\n      )\n    }\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../hubuder/HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../hubuder/HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../hubuder/HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../hubuder/HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../hubuder/HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../hubuder/HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../hubuder/HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../hubuder/HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../hubuder/HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../hubuder/HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view>\r\n\t\t\r\n\t\t\r\n\t\t<!-- 空盒子用来防止消息过少时 拉起键盘会遮盖消息 -->\r\n\t\t<view :animation=\"anData\" style=\"height:0;\"></view>\r\n\t\t\r\n\t\t<!--  #ifdef H5 -->\r\n\t\t\t<view>\r\n\t\t\t\t<!-- 2.0.19支持autoBack，默认为false -->\r\n\t\t        <u-navbar\r\n\t\t            title=\"聊天中心\"\r\n\t\t            :autoBack=\"true\"\r\n\t\t\t\t\t:placeholder=\"true\"\r\n\t\t        >\r\n\t\t        </u-navbar>\r\n\t\t\t</view>\r\n\t\t\t<!--  #endif -->\r\n\t\t\r\n\t\t<!-- 消息体 -->\r\n\t\t<scroll-view @click=\"ckAddScroolw()\" scroll-with-animation scroll-y=\"true\" @touchmove=\"hideKey\"\r\n\t\t\tstyle=\"width: 750rpx;\" :style=\"{'height':srcollHeight}\" :scroll-top=\"go\">\r\n\t\t\t<!-- 用来获取消息体高度 -->\r\n\t\t\t<view id=\"okk\" scroll-with-animation>\r\n\t\t\t\t<!-- 消息 -->\r\n\t\t\t\t<view class=\"flex-column-start\" v-for=\"(x,i) in msgList\" :key=\"i\">\r\n\r\n\t\t\t\t\t<!-- 用户消息 头像可选加入-->\r\n\t\t\t\t\t<view v-if=\"x.my\" class=\"flex justify-end padding-right one-show  align-start  padding-top\">\r\n\t\t\t\t\t\t<view class=\"flex justify-end\" style=\"width: 400rpx;\">\r\n\t\t\t\t\t\t\t<view class=\"margin-left padding-chat bg-cyan \"\r\n\t\t\t\t\t\t\t\tstyle=\"border-radius: 35rpx;background:#cdeffe;color:#242526 ;\">\r\n\t\t\t\t\t\t\t\t<text style=\"word-break: break-all;\">{{x.msg}}</text>\r\n\r\n\t\t\t\t\t\t\t\t<view style=\"margin-top: 10px;\">\r\n\t\t\t\t\t\t\t\t\t<u-icon @click=\"copyContent(x.msg)\" name=\"order\" color=\"#cfcfd1\" size=\"22\"></u-icon>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<image style=\"height: 75rpx;width: 75rpx;\" class=\"chat-img margin-left\" :src=\"userInfo.avatar\"\r\n\t\t\t\t\t\t\tmode=\"aspectFill\"></image>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<!-- 机器人消息 -->\r\n\t\t\t\t\t<view v-if=\"!x.my\" class=\"flex-row-start margin-left margin-top one-show\">\r\n\t\t\t\t\t\t<view class=\"chat-img flex-row-center\">\r\n\t\t\t\t\t\t\t<image style=\"height: 75rpx;width: 75rpx;\" :src=\"plat_logo\" mode=\"aspectFit\"></image>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"flex\" style=\"width: 500rpx;\">\r\n\t\t\t\t\t\t\t<view class=\"margin-left padding-chat flex-column-start\"\r\n\t\t\t\t\t\t\t\tstyle=\"border-radius: 35rpx;background-color: #f9f9f9;max-width: 250px;\">\r\n\t\t\t\t\t\t\t\t<!-- <text   style=\"word-break: break-all;\" >{{x.msg}}</text> -->\r\n\t\t\t\t\t\t\t\t<mp-html style=\"color: #000000\" :selectable=\"true\" markdown=\"markdown\"\r\n\t\t\t\t\t\t\t\t\t:content=\"x.msg\" />\r\n\r\n\t\t\t\t\t\t\t\t<!-- 消息模板 =>初次问候 -->\r\n\t\t\t\t\t\t\t\t<view class=\"flex-column-start gradient\" v-if=\"x.type==1\">\r\n\t\t\t\t\t\t\t\t\t<text\r\n\t\t\t\t\t\t\t\t\t\tstyle=\"color: #838383;font-size: 22rpx;margin-top: 15rpx;\">请详细描述您要问的问题，例如:</text>\r\n\t\t\t\t\t\t\t\t\t<text @click=\"answer(item)\" style=\"margin-top: 30rpx;\"\r\n\t\t\t\t\t\t\t\t\t\tv-for=\"(item,index) in x.questionList\" :key=\"index\">{{item}}</text>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<view style=\"margin-top: 10px;\">\r\n\t\t\t\t\t\t\t\t\t<u-icon @click=\"copyContent(x.msg)\" name=\"order\" color=\"#cfcfd1\" size=\"22\"></u-icon>\r\n\t\t\t\t\t\t\t\t</view>\r\n\r\n\r\n\t\t\t\t\t\t\t\t<!-- 消息模板 =>多个答案 -->\r\n\t\t\t\t\t\t\t\t<view class=\"flex-column-start gradient\" v-if=\"x.type==2\">\r\n\t\t\t\t\t\t\t\t\t<text style=\"color: #838383;font-size: 22rpx;margin-top: 15rpx;\">猜你想问:</text>\r\n\t\t\t\t\t\t\t\t\t<!-- 连接服务器应该用item.id -->\r\n\t\t\t\t\t\t\t\t\t<text @click=\"answer(index)\" style=\"margin-top: 30rpx;\"\r\n\t\t\t\t\t\t\t\t\t\tv-for=\"(item,index) in x.questionList\" :key=\"index\">{{item}}</text>\r\n\t\t\t\t\t\t\t\t</view>\r\n\r\n\r\n\t\t\t\t\t\t\t\t<!-- 消息模板 => 无法回答-->\r\n\t\t\t\t\t\t\t\t<view class=\"flex-column-start\" v-if=\"x.type==0\">\r\n\t\t\t\t\t\t\t\t\t<text class=\"padding-top-sm gradient\">提交意见与反馈</text>\r\n\t\t\t\t\t\t\t\t\t<text\r\n\t\t\t\t\t\t\t\t\t\tstyle=\"color: #838383;font-size: 22rpx;margin-top: 15rpx;\">下面是一些常见问题,您可以点击对应的文字快速获取答案:</text>\r\n\t\t\t\t\t\t\t\t\t<text @click=\"answer(index)\" class=\"gradient\" style=\"margin-top: 30rpx;\"\r\n\t\t\t\t\t\t\t\t\t\tv-for=\"(item,index) in x.questionList\" :key=\"index\">{{item}}</text>\r\n\t\t\t\t\t\t\t\t\t<view class=\"flex-row-start  padding-top-sm\">\r\n\t\t\t\t\t\t\t\t\t\t<text class=\"my-neirong-sm\">没有你要的答案?</text>\r\n\t\t\t\t\t\t\t\t\t\t<text class=\"padding-left\" style=\"color: #1396c5;\">换一批</text>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\r\n\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<!-- loading是显示 -->\r\n\t\t\t\t<view v-show=\"msgLoad\" class=\"flex-row-start margin-left margin-top\">\r\n\t\t\t\t\t<view class=\"chat-img flex-row-center\">\r\n\t\t\t\t\t\t<image style=\"height: 75rpx;width: 75rpx;\" :src=\"plat_logo\" mode=\"aspectFit\">\r\n\t\t\t\t\t\t</image>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view style=\"width: 500rpx;\">\r\n\t\t\t\t\t\t<view class=\"loading\">\r\n\t\t\t\t\t\t\t<view class=\"dot0\"></view>\r\n\t\t\t\t\t\t\t<view class=\"dot1\"></view>\r\n\t\t\t\t\t\t\t<view class=\"dot2\"></view>\r\n\t\t\t\t\t\t\t<view class=\"dot3\"></view>\r\n\t\t\t\t\t\t\t<view class=\"dot4\"></view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<!-- 防止消息底部被遮 -->\r\n\t\t\t\t<view style=\"height: 120rpx;\"></view>\r\n\t\t\t</view>\r\n\r\n\t\t</scroll-view>\r\n\r\n\t\t<!-- 底部导航栏 -->\r\n\t\t<view @click=\"isToLogin()\" class=\"flex-column-center\" style=\"position: fixed;bottom: -180px;\"\r\n\t\t\t:animation=\"animationData\">\r\n\t\t\t<view class=\"bottom-dh-char flex-row-around\" style=\"font-size: 55rpx;\">\r\n\t\t\t\t<!-- vue无法使用软键盘\"发送\" -->\r\n\t\t\t\t<input v-model=\"msg\" maxlength=\"-1\" class=\"dh-input\" :disabled=\"!isLoginStatus\" type=\"text\"\r\n\t\t\t\t\tstyle=\"background-color: #f0f0f0;font-size: 14px;\" @confirm=\"sendMsg\" confirm-type=\"search\"\r\n\t\t\t\t\tplaceholder-class=\"my-neirong-sm\" :placeholder=\"placeholder\" />\r\n\t\t\t\t<view @click=\"resetModel\" class=\"cu-tag round\" style=\"background-color: unset;padding: unset;\">\r\n\t\t\t\t\t<image src=\"../../../static/reset.png\" style=\"width: 52rpx;height: 52rpx;\">\r\n\t\t\t\t\t</image>\r\n\t\t\t\t</view>\r\n\t\t\t\t<!-- \t\t\t\t<text @click=\"ckAdd\" class=\"cuIcon-roundaddfill text-brown gradient\"></text> -->\r\n\t\t\t\t<view @click=\"ckAdd\" class=\"cu-tag round\" style=\"background-color: unset;padding: unset;\">\r\n\t\t\t\t\t<image src=\"../../../static/add.png\" style=\"width: 52rpx;height: 52rpx;\">\r\n\t\t\t\t\t</image>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<!-- 附加栏(自定义) -->\r\n\t\t\t<view class=\"box-normal \">\r\n\t\t\t\t<u-row justify=\"space-between\" customStyle=\"margin-bottom: 14px\">\r\n\t\t\t\t\t<u-col span=\"3\">\r\n\t\t\t\t\t\t<view @click=\"clickHistory()\" class=\"tb-text\">\r\n\t\t\t\t\t\t\t<image src=\"../../../static/history.png\" style=\"width: 100rpx;height: 100rpx;\">\r\n\t\t\t\t\t\t\t</image>\r\n\t\t\t\t\t\t\t<text>历史记录</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</u-col>\r\n\t\t\t\t\t<u-col span=\"3\">\r\n\t\t\t\t\t\t<view @click=\"clickTask()\" class=\"tb-text\">\r\n\t\t\t\t\t\t\t<image src=\"../../../static/task.png\" style=\"width: 100rpx;height: 100rpx;\">\r\n\t\t\t\t\t\t\t</image>\r\n\t\t\t\t\t\t\t<text>任务中心</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</u-col>\r\n\t\t\t\t\t<u-col span=\"3\">\r\n\t\t\t\t\t\t<view class=\"tb-text\">\r\n\t\t\t\t\t\t\t<u-button hover-class=\"none\" class=\"button-none\" open-type=\"share\"\r\n\t\t\t\t\t\t\t\tcustomStyle=\"height: 100rpx;border-style: unset;\">\r\n\t\t\t\t\t\t\t\t<image src=\"../../../static/mine_share_icon.png\" style=\"width: 100rpx;height: 100rpx;\">\r\n\t\t\t\t\t\t\t\t</image>\r\n\t\t\t\t\t\t\t</u-button>\r\n\r\n\t\t\t\t\t\t\t<text>分享朋友</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</u-col>\r\n\t\t\t\t\t<u-col span=\"3\">\r\n\t\t\t\t\t\t<view class=\"tb-text\">\r\n\t\t\t\t\t\t\t<u-button hover-class=\"none\" class=\"button-none\" open-type=\"contact\"\r\n\t\t\t\t\t\t\t\tcustomStyle=\"height: 100rpx;border-style: unset;\">\r\n\t\t\t\t\t\t\t\t<image src=\"../../../static/mine_tophone_icon.png\"\r\n\t\t\t\t\t\t\t\t\tstyle=\"width: 100rpx;height: 100rpx;\">\r\n\t\t\t\t\t\t\t\t</image>\r\n\t\t\t\t\t\t\t</u-button>\r\n\r\n\t\t\t\t\t\t\t<text>在线客服</text>\r\n\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t</u-col>\r\n\t\t\t\t</u-row>\r\n\t\t\t\t<u-row gutter=\"10\">\r\n\t\t\t\t\t<u-col @click=\"clickMore()\" span=\"3\">\r\n\t\t\t\t\t\t<view class=\"tb-text\">\r\n\t\t\t\t\t\t\t<image src=\"../../../static/more.png\" style=\"width: 100rpx;height: 100rpx;\">\r\n\t\t\t\t\t\t\t</image>\r\n\t\t\t\t\t\t\t<text>更多</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</u-col>\r\n\r\n\t\t\t\t</u-row>\r\n\t\t\t</view>\r\n\r\n\r\n\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\tlet socket = null;\r\n\timport request from \"../../../request/request.js\";\r\n\timport util from \"../../../util/util.js\";\r\n\timport websocket from \"../../../util/websocket.js\";\r\n\r\n\timport md from '../../../static/js/md';\r\n\timport mpHtml from '@/node_modules/mp-html/mp-html'\r\n\t// rpx和px的比率\r\n\tvar l\r\n\t// 可用窗口高度\r\n\tvar wh\r\n\t// 顶部空盒子的高度\r\n\tvar mgUpHeight\r\n\texport default {\r\n\t\tcomputed: {\r\n\t\t\tmd() {\r\n\t\t\t\treturn md\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomponents: {\r\n\t\t\tmpHtml\r\n\t\t},\r\n\t\tonLoad() {\r\n\t\t\t// this.chatchWindowsHeight();\r\n\t\t\tthis.initbaseConfig();\r\n\t\t\tuni.$on('onMessage', this.onMessage);\r\n\t\t\t// 如果需要缓存消息缓存msgList即可\r\n\t\t\t// 监听键盘拉起\r\n\t\t\t// 因为无法控制键盘拉起的速度,所以这里尽量以慢速处理\r\n\t\t\tuni.onKeyboardHeightChange(res => {\r\n\t\t\t\tconst query = uni.createSelectorQuery()\r\n\t\t\t\tquery.select('#okk').boundingClientRect(data => {\r\n\t\t\t\t\t// 若消息体没有超过2倍的键盘则向下移动差值,防止遮住消息体\r\n\t\t\t\t\tvar up = res.height * 2 - data.height - l * 110\r\n\r\n\t\t\t\t\tif (up > 0) {\r\n\t\t\t\t\t\t// 动态改变空盒子高度\r\n\t\t\t\t\t\tthis.msgMove(up, 300)\r\n\t\t\t\t\t\t// 记录改变的值,若不收回键盘且发送了消息用来防止消息过多被遮盖\r\n\t\t\t\t\t\tmgUpHeight = up\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// 收回\r\n\t\t\t\t\tif (res.height == 0) {\r\n\t\t\t\t\t\tthis.msgMove(0, 0)\r\n\t\t\t\t\t}\r\n\t\t\t\t}).exec();\r\n\t\t\t})\r\n\t\t\tvar query = uni.getSystemInfoSync()\r\n\r\n\t\t\tl = query.screenWidth / 750\r\n\t\t\twh = query.windowHeight\r\n\t\t\tthis.srcollHeight = query.windowHeight + \"px\"\r\n\t\t},\r\n\t\tonUnload() {\r\n\t\t\tsocket.close()\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tdigId: 0, //对话ID\r\n\t\t\t\tplat_logo: '',\r\n\t\t\t\tmsgLoad: false,\r\n\t\t\t\tanData: {},\r\n\t\t\t\tanimationData: {},\r\n\t\t\t\tshowTow: false,\r\n\t\t\t\t// 消息体,定义机器人初次的消息(或者自定义出现时机)\r\n\t\t\t\t// my->谁发的消息 msg->消息文本 type->客服消息模板类型 questionList->快速获取问题答案的问题列表\r\n\t\t\t\tmsgList: [{\r\n\t\t\t\t\tmy: false,\r\n\t\t\t\t\tmsg: \"你好，我是最牛逼的机器人,有什么您可以问我。\",\r\n\t\t\t\t\ttype: 1,\r\n\t\t\t\t\tquestionList: [\"我想要写一个50字关于花的诗句\", \"帮我写一个关于催债的律师函\", \"你觉得我帅吗\"],\r\n\t\t\t\t}],\r\n\t\t\t\tmsg: \"\",\r\n\t\t\t\tgo: 0,\r\n\t\t\t\tsrcollHeight: 0,\r\n\t\t\t\tuserInfo: {},\r\n\t\t\t\tisLoginStatus: false,\r\n\t\t\t\tis_open_api: '',\r\n\t\t\t\tai_chat_bot_api: '',\r\n\t\t\t\topen_api_key: '',\r\n\t\t\t\tchangeAnswerTextContent: '',\r\n\t\t\t\tisReplyIng: false,\r\n\t\t\t\tplaceholder: '暂时未登录,请登录!',\r\n\t\t\t\tbaseConfig: {}\r\n\t\t\t}\r\n\t\t},\r\n\t\tonHide() {\r\n\t\t\tthis.ckAddScroolw()\r\n\t\t\tsocket.close()\r\n\t\t},\r\n\t\tonShow() {\r\n\t\t\t\r\n\t\t\tthis.updateDigId();\r\n\t\t\tthis.initDigo();\r\n\t\t\tthis.initSocket();\r\n\t\t\tthis.initLogin();\r\n\t\t\tthis.plat_logo = uni.getStorageSync('baseConfig').plat_logo;\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tupdateDigId() {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tthat.digId = uni.getStorageSync('digId');\r\n\t\t\t},\r\n\t\t\tinitDigo() {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tif (util.isNotBlank(that.digId) && that.digId != 0) {\r\n\t\t\t\t\tthat.msgList = [];\r\n\t\t\t\t}\r\n\t\t\t\tlet param = {\r\n\t\t\t\t\t'sessionId': this.digId,\r\n\t\t\t\t\t'page': 1,\r\n\t\t\t\t\t'size': 20\r\n\t\t\t\t};\r\n\t\t\t\t//进行存储\r\n\t\t\t\trequest('', '/cricleai/diglogueprocess/listDialogue', 'POST', param, {}).then(res => {\r\n\t\t\t\t\tif (res.code == 200) {\r\n\t\t\t\t\t\tconst arr = res.rows;\r\n\t\t\t\t\t\tarr.forEach(item => {\r\n\t\t\t\t\t\t\tif (util.isNotBlank(item.askContent)) {\r\n\t\t\t\t\t\t\t\tthat.msgList.push({\r\n\t\t\t\t\t\t\t\t\t\"msg\": item.askContent,\r\n\t\t\t\t\t\t\t\t\t\"my\": true\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}   \r\n\r\n\t\t\t\t\t\t\tthat.msgList.push({\r\n\t\t\t\t\t\t\t\tmy: false,\r\n\t\t\t\t\t\t\t\tmsg: item.answerContent,\r\n\t\t\t\t\t\t\t\ttype: -1\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tthis.msgGo(1000)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tinitSocket() {\r\n\t\t\t\tsocket = new websocket();\r\n\t\t\t\tsocket.initSocketLogin();\r\n\t\t\t},\r\n\t\t\tonMessage(e) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tif (e != '[DONE]' && e != 'isOnlineSucc') {\r\n\t\t\t\t\t\tlet result = JSON.parse(e);\r\n\t\t\t\t\t\tif (util.isNotBlank(result.choices[0].delta.content)) {\r\n\t\t\t\t\t\t\t//首先判断是否回复中\r\n\t\t\t\t\t\t\tif (this.isReplyIng) {\r\n\t\t\t\t\t\t\t\t//添加机器人所说的话\r\n\t\t\t\t\t\t\t\tthis.msgList.pop();\r\n\t\t\t\t\t\t\t\t//如果回复中\r\n\t\t\t\t\t\t\t\tthis.insertChatSession(result.choices[0].delta.content);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.isReplyIng = true;\r\n\t\t\t\t\t\t\t\tthis.insertChatSession(result.choices[0].delta.content);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.changeAnswerTextContent = ''\r\n\t\t\t\t\t\tthis.isReplyIng = false\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\tthis.isReplyIng = false\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t},\r\n\t\t\tinsertChatSession(e) {\r\n\t\t\t\tthis.changeAnswerTextContent = this.changeAnswerTextContent + e;\r\n\t\t\t\tthis.msgLoad = false;\r\n\t\t\t\tthis.msgList.push({\r\n\t\t\t\t\tmy: false,\r\n\t\t\t\t\tmsg: this.changeAnswerTextContent,\r\n\t\t\t\t\ttype: -1\r\n\t\t\t\t});\r\n\t\t\t\tthis.msgGo();\r\n\t\t\t},\r\n\t\t\t//历史信息\r\n\t\t\tresetChat() {\r\n\t\t\t\tlet tbAnsweUser = uni.getStorageSync('tbAnsweUser'); //获取缓存内容\r\n\t\t\t\tif (tbAnsweUser) {\r\n\t\t\t\t\tlet replyData = {};\r\n\t\t\t\t\t//进行存储\r\n\t\t\t\t\trequest('', '/ai/reSetChat?openId=' + tbAnsweUser.answeUserOpenid, 'POST', replyData, {}).then(res => {\r\n\t\t\t\t\t\tif (res.code == 200) {\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: '重置成功',\r\n\t\t\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.getUserProfile();\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t},\r\n\t\t\t//历史信息\r\n\t\t\thistoryChat() {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '开发中',\r\n\t\t\t\t\tduration: 2000\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t//复制\r\n\t\t\tcopyContent(msg) {\r\n\t\t\t\tuni.setClipboardData({\r\n\t\t\t\t\tdata: msg\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t//初始化看是否登录\r\n\t\t\tinitLogin() {\r\n\t\t\t\tlet userInfo = uni.getStorageSync('userInfo');\r\n\t\t\t\tif (userInfo) {\r\n\t\t\t\t\tthis.userInfo = userInfo;\r\n\t\t\t\t\t//此部设置用户信息,\r\n\t\t\t\t\tthis.isLoginStatus = true\r\n\t\t\t\t\tthis.placeholder = '请用简短的一句话描述您的内容'\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//是否登录\r\n\t\t\tisToLogin() {\r\n\t\t\t\tutil.isLogin()\r\n\t\t\t},\r\n\t\t\t// 切换输入法时移动输入框(按照官方的上推页面的原理应该会自动适应不同的键盘高度-->官方bug)\r\n\t\t\tgoPag(kh) {\r\n\t\t\t\tthis.upTowmn(0, 250)\r\n\t\t\t\tif (this.keyHeight != 0) {\r\n\t\t\t\t\tif (kh - this.keyHeight > 0) {\r\n\t\t\t\t\t\tthis.upTowmn(this.keyHeight - kh, 250)\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 移动顶部的空盒子\r\n\t\t\tmsgMove(x, t) {\r\n\t\t\t\tvar animation = uni.createAnimation({\r\n\t\t\t\t\tduration: t,\r\n\t\t\t\t\ttimingFunction: 'linear',\r\n\t\t\t\t})\r\n\r\n\t\t\t\tthis.animation = animation\r\n\r\n\t\t\t\tanimation.height(x).step()\r\n\r\n\t\t\t\tthis.anData = animation.export()\r\n\t\t\t},\r\n\t\t\t// 保持消息体可见\r\n\t\t\tmsgGo(e) {\r\n\t\t\t\tlet timel = 100;\r\n\t\t\t\tif (util.isNotBlank(e)) {\r\n\t\t\t\t\ttimel = e;\r\n\t\t\t\t}\r\n\t\t\t\tconst query = uni.createSelectorQuery()\r\n\t\t\t\t// 延时100ms保证是最新的高度\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t// 获取消息体高度\r\n\t\t\t\t\tquery.select('#okk').boundingClientRect(data => {\r\n\t\t\t\t\t\t// 如果超过scorll高度就滚动scorll\r\n\t\t\t\t\t\tif (data.height - wh > 0) {\r\n\t\t\t\t\t\t\tthis.go = data.height - wh\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// 保证键盘第一次拉起时消息体能保持可见\r\n\t\t\t\t\t\tvar moveY = wh - data.height + 200\r\n\t\t\t\t\t\t// 超出页面则缩回空盒子\r\n\t\t\t\t\t\tif (moveY - mgUpHeight < 0) {\r\n\t\t\t\t\t\t\t// 小于0则视为0\r\n\t\t\t\t\t\t\tif (moveY < 0) {\r\n\t\t\t\t\t\t\t\tthis.msgMove(0, 200)\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t// 否则缩回盒子对应的高度\r\n\t\t\t\t\t\t\t\tthis.msgMove(moveY, 200)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}).exec();\r\n\t\t\t\t}, timel)\r\n\t\t\t},\r\n\t\t\t// 回答问题的业务逻辑\r\n\t\t\tanswer(askItem) {\r\n\t\t\t\t// 这里应该传入问题的id,模拟就用index代替了\r\n\t\t\t\tthis.msg = askItem;\r\n\t\t\t\tthis.sendMsg();\r\n\t\t\t},\r\n\t\t\tsendMsg() {\r\n\t\t\t\t// 消息为空不做任何操作\r\n\t\t\t\tif (this.msg == \"\") {\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t}\r\n\t\t\t\t// 显示消息 msg消息文本,my鉴别是谁发的消息(不能用俩个消息数组循环,否则消息不会穿插)\r\n\t\t\t\t// this.msgList.push({\"msg\":this.msg,\"my\":true})\t\t\t\t\r\n\t\t\t\t// 保证消息可见\r\n\t\t\t\t// 回答问题\r\n\t\t\t\tthis.msgKf(this.msg)\r\n\t\t\t\t// 清除消息\r\n\t\t\t\tthis.msg = \"\"\r\n\t\t\t},\r\n\t\t\tmsgKf(x) {\r\n\t\t\t\t// this.msgGo()\r\n\t\t\t\tthis.onTextSend(x)\r\n\t\t\t},\r\n\t\t\t//发送消息\r\n\t\t\tonTextSend(x) {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tlet userInfo = uni.getStorageSync('userInfo');\r\n\t\t\t\tlet checkData = {\r\n\t\t\t\t\t\"userId\": userInfo.userId,\r\n\t\t\t\t}\r\n\t\t\t\trequest('', '/yuan/ai/w/stream/checkIsIng', 'GET', checkData, {}).then(res => {\r\n\t\t\t\t\tif (res.data == true) {\r\n\t\t\t\t\t\t//如果返回的是true,提示,正在查询请稍后重试\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: \"正在回复中\",\r\n\t\t\t\t\t\t\ticon: 'error',\r\n\t\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t} else if (res.code == 500) {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: res.msg,\r\n\t\t\t\t\t\t\ticon: 'error',\r\n\t\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthat.sendMessage(x, true);\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 发送消息\r\n\t\t\tsendMessage(msg, isAppend) {\r\n\r\n\t\t\t\tmsg = msg.trim();\r\n\r\n\t\t\t\tif (!msg || msg == undefined || msg === null || msg === '') {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '发送内容不可为空',\r\n\t\t\t\t\t\ticon: 'error',\r\n\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (isAppend) {\r\n\t\t\t\t\t//此步进行添加内容\r\n\t\t\t\t\t// 显示消息 msg消息文本,my鉴别是谁发的消息(不能用俩个消息数组循环,否则消息不会穿插)\r\n\t\t\t\t\tthis.msgList.push({\r\n\t\t\t\t\t\t\"msg\": msg,\r\n\t\t\t\t\t\t\"my\": true\r\n\t\t\t\t\t})\r\n\t\t\t\t\tthis.msgGo();\r\n\t\t\t\t\tthis.requestChatApi(msg);\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\t\t\trequestChatApi(prompt) {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\t//跳转创建主题\r\n\t\t\t\tif (this.digId == 0) {\r\n\t\t\t\t\twx.showToast({\r\n\t\t\t\t\t\ttitle: \"请先新建/选择对话\",\r\n\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\tduration: 2000,\r\n\t\t\t\t\t\tmask: false,\r\n\t\t\t\t\t\tcomplete: function() {\r\n\t\t\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\t\t\tsocket.close()\r\n\t\t\t\t\t\t\t\tuni.switchTab({\r\n\t\t\t\t\t\t\t\t\turl: '/pages/main/rolefragment/rolefragment'\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\tthat.msgList.pop()\r\n\t\t\t\t\t\t\t}, 1800);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\t// loading\r\n\t\t\t\tthis.msgLoad = true;\r\n\t\t\t\tlet urlPost = '/yuan/ai/w/stream/chatBot';\r\n\t\t\t\tlet data = {\r\n\t\t\t\t\t\"dialogueId\": this.digId,\r\n\t\t\t\t\t\"prompt\": prompt,\r\n\t\t\t\t}\r\n\t\t\t\trequest('', urlPost, 'POST', data, {}).then(res => {\r\n\t\t\t\t\tlet msgerr = res.msg\r\n\t\t\t\t\tif (res.code == 500 && (msgerr.search(\"429\") != -1)) {\r\n\t\t\t\t\t\tthat.msgLoad = false;\r\n\t\t\t\t\t\tthat.msgList.pop();\r\n\t\t\t\t\t\tutil.message(\"访问太过频繁,请稍后重试\", 'error');\r\n\t\t\t\t\t}else  if (res.code == 500 && (msgerr.search(\"not locked by current\") != -1)) {\r\n\t\t\t\t\t\tthat.msgLoad = false;\r\n\t\t\t\t\t\tthat.msgList.pop();\r\n\t\t\t\t\t\tutil.message(\"正在回复..\" );\r\n\t\t\t\t\t}else if (res.code == 500) {\r\n\t\t\t\t\t\tutil.message(msgerr, 'error', function() {\r\n\t\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\t\tthat.msgLoad = false;\r\n\t\t\t\t\t\t\t\tthat.msgList.pop();\r\n\t\t\t\t\t\t\t\tif (msgerr.search(\"新建对话\") != -1 ) {\r\n\t\t\t\t\t\t\t\t\tsocket.close()\r\n\t\t\t\t\t\t\t\t\tuni.switchTab({\r\n\t\t\t\t\t\t\t\t\t\turl: '/pages/main/rolefragment/rolefragment'\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}, 1000)\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\r\n\t\t\t},\r\n\t\t\t// 不建议输入框聚焦时操作此动画\r\n\t\t\tckAdd() {\r\n\t\t\t\tif (!this.showTow) {\r\n\t\t\t\t\tthis.upTowmn(-180, 350)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.upTowmn(0, 200)\r\n\t\t\t\t}\r\n\t\t\t\tthis.showTow = !this.showTow\r\n\t\t\t},\r\n\t\t\tckAddScroolw() {\r\n\t\t\t\tif (this.showTow) {\r\n\t\t\t\t\tthis.upTowmn(0, 200)\r\n\t\t\t\t\tthis.showTow = !this.showTow\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\t\t\thideKey() {\r\n\t\t\t\tuni.hideKeyboard()\r\n\t\t\t},\r\n\t\t\t// 拉起/收回附加栏\r\n\t\t\tupTowmn(x, t) {\r\n\r\n\t\t\t\tvar animation = uni.createAnimation({\r\n\t\t\t\t\tduration: t,\r\n\t\t\t\t\ttimingFunction: 'ease',\r\n\t\t\t\t})\r\n\r\n\t\t\t\tthis.animation = animation\r\n\r\n\t\t\t\tanimation.translateY(x).step()\r\n\r\n\t\t\t\tthis.animationData = animation.export()\r\n\t\t\t},\r\n\t\t\tinitbaseConfig() {\r\n\t\t\t\tutil.getbaseConfig()\r\n\t\t\t\tthis.baseConfig = uni.getStorageSync('baseConfig')\r\n\t\t\t},\r\n\t\t\tclickMore() {\r\n\t\t\t\tsocket.close()\r\n\t\t\t\tuni.switchTab({\r\n\t\t\t\t\turl: '/pages/main/minefragment/minefragment'\r\n\t\t\t\t})\r\n\r\n\t\t\t},\r\n\t\t\tclickTask() {\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: '/pages/main/joinvip/joinvip'\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tresetModel() {\r\n\t\t\t\tsocket.close()\r\n\t\t\t\tuni.switchTab({\r\n\t\t\t\t\turl: '/pages/main/rolefragment/rolefragment'\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tclickHistory() {\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: '/pages/main/chatList/chatList'\r\n\t\t\t\t})\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n\t.bottom-dh-char {\r\n\t\tbackground-color: #f9f9f9;\r\n\t\twidth: 750rpx;\r\n\t\theight: 110rpx;\r\n\t\tpadding-left: 5rpx;\r\n\t}\r\n\r\n\t.center-box {\r\n\t\twidth: 720rpx;\r\n\t\tpadding-left: 25rpx;\r\n\t}\r\n\r\n\t.hui-box {\r\n\t\twidth: 750rpx;\r\n\t\theight: 100%;\r\n\r\n\t}\r\n\r\n\t.dh-input {\r\n\t\twidth: 620rpx;\r\n\t\theight: 65rpx;\r\n\t\tborder-radius: 15rpx;\r\n\t\tpadding-left: 20rpx;\r\n\t\tbackground-color: #FFFFFF;\r\n\t}\r\n\r\n\t.box-normal {\r\n\t\twidth: 750rpx;\r\n\t\theight: 180px;\r\n\t\tbackground-color: #FFFFFF;\r\n\t}\r\n\r\n\t.tb-text view {\r\n\t\tfont-size: 65rpx;\r\n\t}\r\n\r\n\t.tb-text text {\r\n\t\tfont-size: 25rpx;\r\n\t\tcolor: #737373;\r\n\t}\r\n\r\n\t.chat-img {\r\n\t\tborder-radius: 50%;\r\n\t\t// width: 100rpx;\r\n\t\t// height: 100rpx;\r\n\t\twidth: 42px;\r\n\t\theight: 42px;\r\n\t\tbackground-color: #f7f7f7;\r\n\t}\r\n\r\n\t.padding-chat {\r\n\t\tpadding: 17rpx 20rpx;\r\n\t}\r\n\r\n\t.tb-nv {\r\n\t\twidth: 50rpx;\r\n\t\theight: 50rpx;\r\n\t}\r\n\r\n\t.top-new {\r\n\t\tbackground-color: #26B3A0;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: row;\r\n\t\tjustify-content: center;\r\n\t\tflex-wrap: wrap;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.top-reset {\r\n\t\twidth: 40%;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tmargin: 7px 15px;\r\n\t\tbackground-color: #fff;\r\n\t\tpadding: 3px;\r\n\t\tborder-radius: 5px;\r\n\t\tposition: relative;\r\n\t}\r\n\r\n\r\n\t@keyframes jump {\r\n\r\n\t\t0%,\r\n\t\t80%,\r\n\t\t100% {\r\n\t\t\ttransform: scale(0);\r\n\t\t\tbackground-color: #F9F9F9;\r\n\t\t}\r\n\r\n\t\t40% {\r\n\t\t\ttransform: scale(1.0);\r\n\t\t\tbackground-color: #3186fb;\r\n\t\t}\r\n\t}\r\n\r\n\t.dot0,\r\n\t.dot1,\r\n\t.dot2,\r\n\t.dot3 {\r\n\t\tbackground: #417e5c;\r\n\t\twidth: 30rpx;\r\n\t\theight: 30rpx;\r\n\t\tborder-color: #464646;\r\n\t\tborder-radius: 50%;\r\n\t\tdisplay: inline-block;\r\n\t}\r\n\r\n\t.dot0 {\r\n\t\tanimation: jump 1.3s -0.64s linear infinite;\r\n\t}\r\n\r\n\t.dot1 {\r\n\t\tanimation: jump 1.3s -0.32s linear infinite;\r\n\t}\r\n\r\n\t.dot2 {\r\n\t\tanimation: jump 1.3s -0.16s linear infinite;\r\n\t}\r\n\r\n\t.dot3 {\r\n\t\tanimation: jump 1.3s linear infinite;\r\n\t}\r\n\r\n\t.loading {\r\n\t\tpadding: 17rpx 20rpx;\r\n\t}\r\n\r\n\t// .gradient {\r\n\t// \tbackground: linear-gradient(100deg, #c399fe 0%, #3186fb 100%);\r\n\t// \t-webkit-background-clip: text;\r\n\t// \tcolor: transparent;\r\n\t// }\r\n\r\n\t.bg-color {\r\n\t\tbackground-color: unset !important;\r\n\t\tbackground-image: linear-gradient(100deg, #c399fe 0%, #3186fb 100%);\r\n\t}\r\n\r\n\t.flex-row-start {\r\n\t\talign-items: unset;\r\n\t}\r\n\r\n\tbutton::after {\r\n\t\tborder: none;\r\n\t}\r\n\r\n\t.tb-text .u-button :hover {\r\n\t\tbackground-color: inherit !important;\r\n\t\tcolor: inherit;\r\n\t\tborder-color: inherit;\r\n\t}\r\n\t.backImg {\r\n\t\twidth: 18rpx;\r\n\t\theight: 30rpx;\r\n\t\tposition: absolute;\r\n\t\tleft: 0;\r\n\t\tmargin-left: 20rpx;\r\n\t\tmargin-top: 6rpx\r\n\t}\r\n\t.header .title {\r\n\t\ttext-align: center;\r\n\t\tfont-size: 31rpx;\r\n\t\tposition: relative;\r\n\t\tfont-weight: 600;\r\n\t\tcolor: #FFFFFF;\r\n\t\twidth: 100vw;\r\n\t\r\n\t\tflex-direction: row;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t\t/*  padding-top: 33px;\r\n\t\t    padding-bottom: 40px; */\r\n\t}\r\n</style>\r\n","import mod from \"-!../../../../../hubuder/HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../hubuder/HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../hubuder/HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../hubuder/HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../hubuder/HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../hubuder/HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../hubuder/HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../hubuder/HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../hubuder/HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../hubuder/HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../hubuder/HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../hubuder/HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../hubuder/HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../hubuder/HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../hubuder/HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../hubuder/HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../hubuder/HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../hubuder/HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1682746494053\n      var cssReload = require(\"D:/hubuder/HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}